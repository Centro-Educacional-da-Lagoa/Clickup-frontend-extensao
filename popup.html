<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <title>ClickUp</title>
    
    <!-- Favicon SVG Inline - ClickUp Logo -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%234ac9f9' d='M8,15.044l-1.622,1.392l1.814,2.115C8.069,17.398,8.002,16.229,8,15.044z'%3E%3C/path%3E%3Cpath fill='%23ff2bbe' d='M10.675,21.444l1.564,1.823l0.775-0.665c0,0,0-0.001,0-0.002l1.696-1.455l9.407-8.07 c0-0.001,0-0.002,0-0.003l0.038-0.032l1.862,1.59l4.574,3.904l5.511,4.706l0.391-0.458l1.325-1.552l1.354-1.586c0,0,0,0-0.001,0 l2.774-3.25l-5.015-4.282l-1.527-1.304l-1.522-1.299l0,0l-1.523-1.3l-1.523-1.3c0,0,0,0,0,0.001l-1.523-1.3l-1.521-1.3l0,0 l-1.523-1.301l-1.523-1.3l-0.603-0.515l-3.407,2.923l-3.444,2.955l-2.704,2.32l-2.359,2.024l-2.179,1.87l-3.671,3.15L10.675,21.444 z'%3E%3C/path%3E%3Cpath fill='%234ac9f9' d='M27.073,36.625C26.088,36.866,25.06,37,24,37c-0.319,0-0.635-0.013-0.948-0.036 c-1.394-0.101-2.724-0.425-3.96-0.931c-1.378-0.564-2.639-1.354-3.732-2.331v0.001c-1.044-0.932-1.937-2.031-2.637-3.253 l-0.927,0.697l-5.491,4.132c1.292,2.023,2.926,3.804,4.811,5.277C11.045,39.712,11,38.861,11,38c0,0.861,0.045,1.712,0.116,2.555 c1.347,1.053,2.824,1.943,4.405,2.645c1.423,0.632,2.925,1.115,4.494,1.418C21.305,44.867,22.637,45,24,45 c0.137,0,0.271-0.011,0.407-0.014c1.44-0.028,2.843-0.2,4.197-0.505c-0.764-1.46-1.295-3.071-1.504-4.804 C26.975,38.642,26.975,37.622,27.073,36.625z'%3E%3C/path%3E%3Cpath fill='%234ac9f9' d='M38.867,32.398l-3.3-2.483c-0.934,1.824-2.286,3.397-3.929,4.596 c-1.348,0.984-2.893,1.709-4.564,2.115c-0.097,0.997-0.098,2.017,0.027,3.052c0.209,1.733,0.74,3.344,1.504,4.804 c1.343-0.302,2.636-0.732,3.867-1.279C33.7,42.658,34.865,42,35.955,41.24c2.445-1.706,4.516-3.912,6.054-6.478L38.867,32.398z'%3E%3C/path%3E%3Cpath fill='%23e20caa' d='M6.378,16.436l1.814,2.115C8.069,17.398,8.002,16.229,8,15.044L6.378,16.436z'%3E%3C/path%3E%3Cpath fill='%23ff2bbe' d='M12,15c0-1.214,0.083-2.409,0.228-3.584l-2.179,1.87l-2.048,1.758 c0.002,1.185,0.068,2.354,0.192,3.507l2.482,2.893l1.564,1.823l0.775-0.665C12.357,20.178,12,17.631,12,15z'%3E%3C/path%3E%3Cpath fill='%23ff3da8' d='M17.291,7.072l-2.704,2.32l-2.359,2.024C12.083,12.591,12,13.786,12,15 c0,2.631,0.357,5.178,1.013,7.601l1.697-1.456l1.73-1.484C16.155,18.15,16,16.593,16,15C16,12.228,16.458,9.564,17.291,7.072z'%3E%3C/path%3E%3Cpath fill='%23ff5190' d='M24.745,1.709l-0.603-0.515l-3.407,2.923l-3.444,2.955C16.458,9.564,16,12.228,16,15 c0,1.593,0.155,3.15,0.44,4.66l1.778-1.525l1.859-1.595C20.041,16.029,20,15.52,20,15C20,9.956,21.781,5.33,24.745,1.709z'%3E%3C/path%3E%3Cpath fill='%23ff6d6e' d='M26.268,3.009l-1.523-1.3C21.781,5.33,20,9.956,20,15c0,0.52,0.041,1.029,0.078,1.54l1.928-1.654 l2.111-1.811c0.373-3.301,1.688-6.314,3.674-8.765L26.268,3.009z'%3E%3C/path%3E%3Cpath fill='%23ff884d' d='M30.835,6.909l-1.523-1.3l-1.523-1.3c-1.986,2.451-3.301,5.464-3.674,8.765l0.04-0.034l1.862,1.59 l2.057,1.756C28.028,15.931,28,15.469,28,15C28,11.939,29.065,9.13,30.835,6.909z'%3E%3C/path%3E%3Cpath fill='%23ff943f' d='M32,15c0-2.07,0.706-3.971,1.881-5.492l-1.523-1.3l-1.523-1.3C29.065,9.13,28,11.939,28,15 c0,0.469,0.028,0.931,0.076,1.387l2.515,2.147l5.511,4.706l0.391-0.458C33.809,21.224,32,18.326,32,15z'%3E%3C/path%3E%3Cpath fill='%23ffa32d' d='M36,15c0-1.079,0.349-2.071,0.93-2.888l-1.527-1.304l-1.523-1.3C32.706,11.029,32,12.93,32,15 c0,3.326,1.809,6.224,4.493,7.782l1.325-1.552l1.354-1.586C37.317,18.912,36,17.114,36,15z'%3E%3C/path%3E%3Cpath fill='%23ffc208' d='M36.93,12.112C36.349,12.929,36,13.921,36,15c0,2.114,1.317,3.912,3.171,4.644l2.774-3.25 L36.93,12.112z'%3E%3C/path%3E%3Cg%3E%3Cpath fill='%238638fd' d='M11.796,31.147l-5.491,4.132c1.292,2.023,2.926,3.804,4.811,5.277C11.045,39.712,11,38.861,11,38 C11,35.641,11.281,33.349,11.796,31.147z'%3E%3C/path%3E%3Cpath fill='%237b52fc' d='M15,38c0-1.465,0.127-2.899,0.36-4.297c-1.044-0.932-1.937-2.031-2.637-3.253l-0.927,0.697 C11.281,33.349,11,35.641,11,38c0,0.861,0.045,1.712,0.116,2.555c1.347,1.053,2.824,1.943,4.405,2.645C15.18,41.52,15,39.781,15,38 z'%3E%3C/path%3E%3Cpath fill='%235b4aff' d='M15.521,43.2c1.423,0.632,2.925,1.115,4.494,1.418C19.357,42.529,19,40.306,19,38 c0-0.663,0.035-1.318,0.092-1.967c-1.378-0.564-2.639-1.354-3.732-2.331C15.127,35.101,15,36.535,15,38 C15,39.781,15.18,41.52,15.521,43.2z'%3E%3C/path%3E%3Cpath fill='%23775dfc' d='M24.407,44.986C23.502,42.838,23,40.478,23,38c0-0.35,0.033-0.691,0.052-1.036 c-1.394-0.101-2.724-0.425-3.96-0.931C19.035,36.682,19,37.337,19,38c0,2.306,0.357,4.529,1.015,6.618 C21.305,44.867,22.637,45,24,45C24.137,45,24.271,44.989,24.407,44.986z'%3E%3C/path%3E%3Cpath fill='%23716bfb' d='M24.407,44.986c1.44-0.028,2.843-0.2,4.197-0.505c-0.764-1.46-1.295-3.071-1.504-4.804 c-0.125-1.035-0.125-2.055-0.027-3.052C26.088,36.866,25.06,37,24,37c-0.319,0-0.635-0.013-0.948-0.036 C23.033,37.309,23,37.65,23,38C23,40.478,23.502,42.838,24.407,44.986z'%3E%3C/path%3E%3Cpath fill='%236094fa' d='M31,38c0-1.229,0.232-2.401,0.638-3.489c-1.348,0.984-2.893,1.709-4.564,2.115 c-0.097,0.997-0.098,2.017,0.027,3.052c0.209,1.733,0.74,3.344,1.504,4.804c1.343-0.302,2.636-0.732,3.867-1.279 C31.544,41.686,31,39.909,31,38z'%3E%3C/path%3E%3Cpath fill='%2358a8fa' d='M32.472,43.203C33.7,42.658,34.865,42,35.955,41.24C35.353,40.305,35,39.195,35,38 c0-2.561,1.608-4.741,3.867-5.602l-3.3-2.483c-0.934,1.824-2.286,3.397-3.929,4.596C31.232,35.599,31,36.771,31,38 C31,39.909,31.544,41.686,32.472,43.203z'%3E%3C/path%3E%3Cpath fill='%234ac9f9' d='M42.009,34.762l-3.142-2.364C36.608,33.259,35,35.439,35,38c0,1.195,0.353,2.305,0.955,3.24 C38.4,39.534,40.471,37.328,42.009,34.762z'%3E%3C/path%3E%3C/g%3E%3C/svg%3E">
    
    <style>
      body {
        font-family: system-ui, sans-serif;
        margin: 12px;
        width: 420px;
        max-height: 600px;
        overflow-y: auto;
      }
      h3 {
        margin: 0 0 16px 0;
        color: #7b68ee;
      }
      button {
        width: 100%;
        padding: 10px;
        margin-top: 8px;
        cursor: pointer;
      }
      button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      select {
        width: 100%;
        padding: 8px;
        margin: 8px 0;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
      }
      label {
        display: block;
        font-weight: 600;
        color: #333;
        margin-top: 12px;
        margin-bottom: 4px;
        font-size: 14px;
      }
      .muted {
        color: #666;
        font-size: 12px;
        margin-top: 8px;
      }
      .ok {
        color: #0a7;
      }
      .err {
        color: #c00;
        font-weight: 600;
      }
      .info {
        color: #069;
      }

      .workspace-selector {
        background: #f8f9fa;
        padding: 12px;
        border-radius: 6px;
        margin-bottom: 12px;
      }
      .workspace-info {
        font-size: 12px;
        color: #666;
        margin-top: 4px;
      }
      .filters-container {
        background: #fff;
        padding: 12px;
        border: 1px solid #e0e0e0;
        border-radius: 6px;
        margin-bottom: 12px;
      }
      .btn-mini {
        padding: 4px 8px;
        font-size: 11px;
        background: #6c757d;
        color: white;
        border: none;
        border-radius: 3px;
        cursor: pointer;
      }
      .btn-mini:hover {
        background: #5c636a;
      }

      .spaces-list {
        margin: 8px 0;
        max-height: 200px;
        overflow-y: auto;
      }
      .space-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 12px;
        margin: 4px 0;
        background: #fff;
        border: 1px solid #e0e0e0;
        border-radius: 4px;
        font-size: 13px;
        transition: all 0.2s;
      }
      .space-item:hover {
        background: #f8f9fa;
        border-color: #7b68ee;
      }
      .space-name {
        font-weight: 600;
        color: #333;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .space-color {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        display: inline-block;
      }
      .space-count {
        background: #7b68ee;
        color: white;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
      }

      #scanResults {
        margin-top: 16px;
      }
      .task-list {
        max-height: 280px;
        overflow-y: auto;
        border: 1px solid #ddd;
        padding: 8px;
        margin: 8px 0;
        border-radius: 4px;
        background: #fff;
      }
      .task-item {
        padding: 8px;
        margin: 4px 0;
        background: #f9f9f9;
        border-left: 3px solid #7b68ee;
        border-radius: 3px;
        font-size: 13px;
        display: flex;
        align-items: flex-start;
        gap: 8px;
        transition: all 0.2s;
      }
      .task-item:hover {
        background: #f0f0f0;
      }
      .task-item.selected {
        background: #e8e3ff;
        border-left-color: #5a48cc;
      }
      .subtask-item {
        background: #fafafa;
        border-left: 2px solid #9f8eee;
        font-size: 12px;
        margin: 2px 0;
      }
      .subtask-item:hover {
        background: #f5f5f5;
      }
      .subtask-item.selected {
        background: #f0ebff;
      }
      .subtask-container {
        margin-left: 32px;
        border-left: 2px solid #e0e0e0;
        padding-left: 8px;
      }
      .subtask-toggle {
        cursor: pointer;
        user-select: none;
        font-size: 10px;
        color: #7b68ee;
        padding: 4px;
        margin-right: 4px;
        transition: transform 0.2s;
        display: inline-block;
        min-width: 16px;
      }
      .subtask-toggle:hover {
        color: #5a48cc;
        transform: scale(1.2);
      }
      .subtask-toggle.expanded {
        transform: rotate(0deg);
      }
      .subtask-badge {
        display: inline-block;
        background: #7b68ee;
        color: white;
        font-size: 10px;
        padding: 2px 6px;
        border-radius: 10px;
        margin-left: 6px;
        font-weight: 600;
      }
      .task-checkbox {
        margin-top: 2px;
        cursor: pointer;
        width: 16px;
        height: 16px;
      }
      .task-content {
        flex: 1;
        cursor: pointer;
      }
      .task-name {
        font-weight: 600;
        color: #333;
        margin-bottom: 4px;
      }
      .task-meta {
        font-size: 11px;
        color: #666;
        margin-top: 2px;
      }
      .task-status {
        display: inline-block;
        padding: 2px 6px;
        background: #e3f2fd;
        color: #1976d2;
        border-radius: 3px;
        font-size: 10px;
        font-weight: 600;
      }

      .confirmation {
        background: #fff3cd;
        border: 1px solid #ffc107;
        padding: 12px;
        border-radius: 4px;
        margin: 8px 0;
      }
      .confirmation-text {
        font-size: 13px;
        margin-bottom: 8px;
      }
      .button-group {
        display: flex;
        gap: 8px;
      }
      .button-group button {
        margin: 0;
      }
      .btn-primary {
        background: #7b68ee;
        color: white;
        border: none;
        border-radius: 4px;
        font-weight: 600;
      }
      .btn-primary:hover {
        background: #6a5acd;
      }
      .btn-secondary {
        background: #6c757d;
        color: white;
        border: none;
        border-radius: 4px;
      }
      .btn-secondary:hover {
        background: #5c636a;
      }

      .loading {
        text-align: center;
        padding: 20px;
        color: #666;
      }
      .hidden {
        display: none;
      }

      /* Login Screen Styles */
      #loginScreen {
        text-align: center;
        padding: 20px 0;
      }
      #loginScreen h2 {
        color: #7b68ee;
        margin-bottom: 16px;
      }
      #loginScreen p {
        color: #666;
        margin-bottom: 24px;
        line-height: 1.6;
      }
      .login-icon {
        font-size: 64px;
        margin-bottom: 16px;
      }
      .user-header {
        background: #f8f9fa;
        padding: 12px;
        border-radius: 6px;
        margin-bottom: 16px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .user-info {
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .user-name {
        font-weight: 600;
        color: #333;
      }
      .logout-link {
        color: #dc3545;
        cursor: pointer;
        font-size: 12px;
        text-decoration: underline;
      }
      .logout-link:hover {
        color: #c82333;
      }

      /* Login Button */
      .connect-btn {
        background: linear-gradient(135deg, #f54444 0%, #3262e7 100%);
        color: white;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        font-size: 16px;
        padding: 14px 24px;
        transition: transform 0.2s, box-shadow 0.2s;
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      }
      .connect-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 6px 16px rgba(102, 126, 234, 0.5);
      }

    </style>
  </head>
  <body>
    <!-- LOGIN SCREEN -->
    <div id="loginScreen" class="hidden">
      <div class="login-icon"><img src="https://sinergiaeducacao.com.br/wp-content/uploads/2023/09/logo-sinergia.svg" alt="Logo sinergia"></div>
      <h2>Bem-vindo ao ClickUp Manager</h2>
      <p>Conecte-se √† sua conta ClickUp para gerenciar suas tarefas</p>

    
      <button id="loginBtn" class="connect-btn">
        Conectar ao ClickUp
      </button>

      <div id="loginResult" style="margin-top: 16px"></div>

      <p class="muted" style="margin-top: 24px">
        üí° Voc√™ tamb√©m pode configurar manualmente em <b>op√ß√µes da extens√£o</b>
      </p>
    </div>

    <!-- TASK SCREEN -->
    <div id="taskScreen" class="hidden">
      <div class="user-header">
        <div class="user-info">
          <span>üë§</span>
          <span class="user-name" id="userName">Carregando...</span>
        </div>
        <span class="logout-link" id="logoutLink">Desconectar</span>
      </div>

      <h3>Gerenciamento de Tarefas</h3>

    <div id="initialView">
      <div class="workspace-selector">
        <label for="workspaceSelect">Espa√ßo de trabalho</label>
        <select id="workspaceSelect">
          <option value="">Carregando workspaces...</option>
        </select>
        <div class="workspace-info" id="workspaceInfo"></div>
      </div>

      <div class="filters-container hidden" id="filtersContainer">
        <div style="display: flex; gap: 8px; margin-bottom: 8px">
          <input
            type="text"
            id="searchInput"
            placeholder="Buscar por nome da tarefa..."
            style="
              flex: 1;
              padding: 8px;
              border: 1px solid #ddd;
              border-radius: 4px;
              font-size: 13px;
            "
          />
        </div>

        <div style="margin-top: 12px">
          <label
            style="
              margin: 0 0 6px 0;
              font-size: 13px;
              font-weight: 600;
              display: block;
            "
            >Status:</label
          >
          <select
            id="statusFilters"
            style="
              width: 100%;
              padding: 6px;
              border: 1px solid #ddd;
              border-radius: 4px;
              font-size: 13px;
            "
          >
            <option value="all">Todos os status</option>
          </select>
        </div>
      </div>

      <div id="tasksContainer" class="hidden">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 8px 0;
          "
        >
          <span id="taskCount" class="muted"></span>
          <div style="display: flex; gap: 8px">
            <button id="selectAllBtn" class="btn-mini">Selecionar todas</button>
            <button id="deselectAllBtn" class="btn-mini">
              Desmarcar todas
            </button>
          </div>
        </div>
        <div id="taskList" class="task-list"></div>

        <div
          style="
            margin-top: 12px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 6px;
          "
        >
          <label
            style="
              margin: 0 0 6px 0;
              font-size: 13px;
              font-weight: 600;
              display: block;
            "
          >
            Alterar status das tarefas selecionadas para:
          </label>
          <select
            id="targetStatusSelect"
            style="
              width: 100%;
              padding: 8px;
              border: 1px solid #ddd;
              border-radius: 4px;
              font-size: 13px;
              margin-bottom: 8px;
            "
          >
            <option value="">Selecione um status...</option>
          </select>
          <button id="changeStatusBtn" class="btn-primary" disabled>
            ‚öôÔ∏è Alterar Status das Tarefas Selecionadas
          </button>
        </div>
      </div>

      <p id="msg" class="muted"></p>
    </div>
    <!-- END TASK SCREEN -->

    <script src="popup.js"></script>
  </body>
</html>
